(function(b){if(typeof b.mry=="undefined"){b.mry={}}var a=b.mry;a.net=a.net?a.net:{};a.analytics=a.analytics?a.analytics:{};a.analytics.omniture=a.analytics.omniture?a.analytics.omniture:{};a.net.NetInfo={};a.net.NetInfo.getUrl=function(){return document.domain};a.net.NetInfo.getHash=function(){return window.location.hash};a.net.NetInfo.getSiteId=function(){var d;var c=window.location.search;if(c==null||c==""){d=""}else{d=a.net.NetInfo.getQueryVariable(c,"siteid")}return d};a.net.NetInfo.getQueryVariable=function(d,e){d=d.substring(1);var f=d.split("&");for(var c=0;c<f.length;c++){var g=f[c].split("=");if(g[0]==e){return g[1]}}return""};a.analytics.omniture.Accounts=function(c){this._data=[];this._count=0;if(c instanceof Array){for(var d in c){var e=c[d];if(e.account==undefined||e.address==undefined||e.account==""||e.account==""){throw new Error("Accounts data is invalid");return false}}this._data=c}};a.analytics.omniture.Accounts.prototype.next=function(){var c=this._data[this._count];this._count++;return c};a.analytics.omniture.Accounts.prototype.hasNext=function(){if(this._count<this._data.length){return true}return false};a.analytics.omniture.Accounts.prototype.addAccount=function(c,d){this._data.push(new a.analytics.omniture.Account(c,d))};a.analytics.omniture.Accounts.prototype.getAccount=function(){var f;var e=a.net.NetInfo.getUrl();while(this.hasNext()){var c=this.next();var d=new RegExp(c.address,"i");if(d.test(e)){f=c.account;break}}return f};a.analytics.omniture.Account=function(c,d){this.account=c;this.address=d};a.analytics.Omniture=function(d,c){this.library=d;this.s=c;this.s.campaign=a.net.NetInfo.getSiteId()};a.analytics.Omniture.prototype.constructor=a.analytics.Omniture;a.analytics.Omniture.prototype.clear=function(){for(var c=1;c<=75;c++){this.s["prop"+c]="";this.s["eVar"+c]=""}this.s.pageName="";this.s.channel="";this.s.events="";this.s.campaign="";this.s.linkTrackVars=""};a.analytics.Omniture.prototype.sendId=function(e){try{var d=this.getItem(e)}catch(c){return false}this.send(d);return true};a.analytics.Omniture.prototype.getItem=function(e){var d=this.library[e];if(d==undefined){throw new Error("[Omniture] Item doesn't exist")}else{var f={};for(var c in d){f[c]=d[c]}return f}};a.analytics.Omniture.prototype.send=function(e){this.clear();var c=this._getJSFunction(e);c();if(e.method.toLowerCase()=="tracklink"){var d="";typeof(e.pev2)==String?d=e.pev2:d=e.name;this._trackLink(document.location,e.type,d)}else{this._track()}this.clear()};a.analytics.Omniture.prototype._getJSFunction=function(h){var f="";var c="";var g=this._getMethod(h);for(var d in h){if(!d.match(/(pev2|type|method)/i)&&d!=="name"){f=f.concat("s.").concat(d).concat("='").concat(h[d]).concat("';");c+=d+","}}if(c.length>0&&g.toLowerCase()=="tracklink"){c=c.substring(0,c.length-1);f=f.concat("s.linkTrackVars='"+c+"';")}var e=new Function(f);return e};a.analytics.Omniture.prototype._getMethod=function(d){var c="";if(d.method==undefined){if(d.pageName!=undefined){c="track"}else{if(d.pev2==undefined&&d.name==undefined){throw new Error('[Omniture] trackLink is assumed, a "name" or "pev2" must be added to library item.')}if(d.type==undefined){throw new Error('[Omniture] trackLink is assumed, a "type" must be added to library item.')}c="trackLink"}d.method=c}else{c=d.method}return c};a.analytics.Omniture.prototype._track=function(){this.s.t()};a.analytics.Omniture.prototype._trackLink=function(d,c,e){if(d==undefined||c==undefined||e==undefined){throw new Error("[Omniture] trackLink parameter(s) are missing");return false}this.s.tl(d,c,e)};a.analytics.Omniture.constructor.accounts=new a.analytics.omniture.Accounts();a.analytics.Omniture.addAccount=function(d,c){a.analytics.Omniture.constructor.accounts.addAccount(d,c)};a.analytics.Omniture.getAccount=function(){var c=a.analytics.Omniture.constructor.accounts.getAccount();a.analytics.Omniture.constructor.accounts=new a.analytics.omniture.Accounts();return c}})((typeof window=="undefined")?this:window);